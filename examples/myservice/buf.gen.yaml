version: v1
managed:
  enabled: true
plugins:
  # Phase 1: Generate service-specific router proto files
  - name: grpcrouter-proto
    path: ../../cmd/protoc-gen-grpcrouter-proto/protoc-gen-grpcrouter-proto
    out: gen/proto
    strategy: directory
  
  # Standard Go generation for original service protos
  - name: go
    out: gen/go
    opt:
      - paths=source_relative
  
  - name: go-grpc
    out: gen/go
    opt:
      - paths=source_relative
  
  # Phase 4: Generate service bridge for connecting existing services to router
  - name: grpcrouter-bridge
    path: ../../cmd/protoc-gen-grpcrouter-bridge/protoc-gen-grpcrouter-bridge
    out: gen/go
    strategy: directory
  
  # Phase 3: Generate router implementation (will be added to Step 2)
  # - name: grpcrouter-impl
  #   path: ../../cmd/protoc-gen-grpcrouter-impl/protoc-gen-grpcrouter-impl
  #   out: gen/go
  #   strategy: directory